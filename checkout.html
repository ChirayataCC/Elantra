<!DOCTYPE html>

<html lang="en-US">

<head>
    <meta charset="utf-8">
    <title>Élantra</title>

    <meta name="author" content="Chirayata Halder">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <!-- font -->
    <link rel="stylesheet" href="fonts/fonts.css">
    <link rel="stylesheet" href="fonts/font-icons.css">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/swiper-bundle.min.css">
    <link rel="stylesheet" href="css/animate.css">
    <link rel="stylesheet" type="text/css" href="css/styles.css?v=<?= time() ?>" />

    <!-- Favicon and Touch Icons  -->
    <link rel="shortcut icon" href="images/logo/favicon.png">
    <link rel="apple-touch-icon-precomposed" href="images/logo/favicon.png">
</head>

<body>
    <!-- Header -->
    <header id="header" class="header-default header-absolute">
        <div class="px_15 lg-px_40">
            <div class="row wrapper-header align-items-center">
                <div class="col-md-4 col-3 tf-lg-hidden">
                    <a href="#mobileMenu" data-bs-toggle="offcanvas" aria-controls="offcanvasLeft">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="16" viewBox="0 0 24 16" fill="none">
                            <path
                                d="M2.00056 2.28571H16.8577C17.1608 2.28571 17.4515 2.16531 17.6658 1.95098C17.8802 1.73665 18.0006 1.44596 18.0006 1.14286C18.0006 0.839753 17.8802 0.549063 17.6658 0.334735C17.4515 0.120408 17.1608 0 16.8577 0H2.00056C1.69745 0 1.40676 0.120408 1.19244 0.334735C0.978109 0.549063 0.857702 0.839753 0.857702 1.14286C0.857702 1.44596 0.978109 1.73665 1.19244 1.95098C1.40676 2.16531 1.69745 2.28571 2.00056 2.28571ZM0.857702 8C0.857702 7.6969 0.978109 7.40621 1.19244 7.19188C1.40676 6.97755 1.69745 6.85714 2.00056 6.85714H22.572C22.8751 6.85714 23.1658 6.97755 23.3801 7.19188C23.5944 7.40621 23.7148 7.6969 23.7148 8C23.7148 8.30311 23.5944 8.59379 23.3801 8.80812C23.1658 9.02245 22.8751 9.14286 22.572 9.14286H2.00056C1.69745 9.14286 1.40676 9.02245 1.19244 8.80812C0.978109 8.59379 0.857702 8.30311 0.857702 8ZM0.857702 14.8571C0.857702 14.554 0.978109 14.2633 1.19244 14.049C1.40676 13.8347 1.69745 13.7143 2.00056 13.7143H12.2863C12.5894 13.7143 12.8801 13.8347 13.0944 14.049C13.3087 14.2633 13.4291 14.554 13.4291 14.8571C13.4291 15.1602 13.3087 15.4509 13.0944 15.6653C12.8801 15.8796 12.5894 16 12.2863 16H2.00056C1.69745 16 1.40676 15.8796 1.19244 15.6653C0.978109 15.4509 0.857702 15.1602 0.857702 14.8571Z"
                                fill="currentColor"></path>
                        </svg>
                    </a>
                </div>
                <div class="col-xl-3 col-md-4 col-6">
                    <a href="index.html" class="logo-header">
                        <img src="images/logo/logo.png" alt="logo" class="logo">
                    </a>
                </div>
                <div class="col-xl-6 tf-md-hidden">
                    <nav class="box-navigation text-center">
                        <ul class="box-nav-ul d-flex align-items-center justify-content-center gap-30">
                            <li class="menu-item">
                                <a href="newarrival.html" class="item-link">New Arrivals</a>
                            </li>
                            <li class="menu-item">
                                <a href="bestseller.html" class="item-link">Best Sellers</a>
                            </li>
                            <li class="menu-item">
                                <a href="collection.html" class="item-link">Collection</a>
                            </li>
                            <li class="menu-item">
                                <a href="about-us.html" class="item-link">About Us</a>
                            </li>
                            <li class="menu-item">
                                <a href="contact.html" class="item-link">Contact Us</a>
                            </li>
                        </ul>
                    </nav>
                </div>
                <div class="col-xl-3 col-md-4 col-3">
                    <ul class="nav-icon d-flex justify-content-end align-items-center gap-20">
                        <li class="nav-wishlist"><a href="wishlist.html" class="nav-icon-item"><i
                                    class="icon icon-heart"></i><span class="count-box">0</span></a></li>
                        <li class="nav-cart"><a href="#shoppingCart" data-bs-toggle="modal" class="nav-icon-item"><i
                                    class="icon icon-bag"></i><span class="count-box">0</span></a></li>
                    </ul>
                </div>
            </div>
        </div>
    </header>
    <!-- /Header -->
<!-- page-title -->
<div class="tf-page-title">
    <div class="container-full">
        <div class="heading text-center">Check Out</div>
    </div>
</div>
<!-- /page-title -->

<!-- page-cart -->
<section class="flat-spacing-11">
    <div class="container">
        <div class="tf-page-cart-wrap layout-2">
            <div class="tf-page-cart-item">
                <h5 class="fw-5 mb_20">Billing details</h5>
                <form class="form-checkout">
                    <div class="box grid-2">
                        <fieldset class="fieldset">
                            <label for="first-name">First Name</label>
                            <input type="text" id="first-name" placeholder="First Name">
                        </fieldset>
                        <fieldset class="fieldset">
                            <label for="last-name">Last Name</label>
                            <input type="text" id="last-name" placeholder="Last Name">
                        </fieldset>
                    </div>
                    <fieldset class="box fieldset">
                        <label for="country">Country/Region</label>
                        <div class="select-custom">
                            <select class="tf-select w-100" id="country" name="address[country]" data-default="">
                                <option value="Select Country">Select Country</option>
                                <option value="Australia">
                                    Australia</option>
                                <option value="Austria">Austria</option>
                                <option value="Belgium">Belgium</option>
                                <option value="Canada">
                                    Canada</option>
                                <option value="Czech Republic">Czechia</option>
                                <option value="Denmark">Denmark</option>
                                <option value="Finland">Finland</option>
                                <option value="France">France</option>
                                <option value="Germany">Germany</option>
                                <option value="Hong Kong">
                                    Hong Kong SAR</option>
                                <option value="Ireland">
                                    Ireland</option>
                                <option value="Israel">Israel</option>
                                <option value="Italy">
                                    Italy</option>
                                <option value="Japan">
                                    Japan</option>
                                <option value="Malaysia">
                                    Malaysia</option>
                                <option value="Netherlands">Netherlands</option>
                                <option value="New Zealand">
                                    New Zealand</option>
                                <option value="Norway">Norway</option>
                                <option value="Poland">Poland</option>
                                <option value="Portugal">
                                    Portugal</option>
                                <option value="Singapore">Singapore</option>
                                <option value="South Korea">
                                    South Korea</option>
                                <option value="Spain">
                                    Spain</option>
                                <option value="Sweden">Sweden</option>
                                <option value="Switzerland">Switzerland</option>
                                <option value="United Arab Emirates">
                                    United Arab Emirates</option>
                                <option value="United Kingdom">
                                    United Kingdom</option>
                                <option value="United States">
                                    United States</option>
                                <option value="Vietnam">Vietnam</option>
                            </select>
                        </div>
                    </fieldset>
                    <fieldset class="box fieldset">
                        <label for="city">Town/City</label>
                        <input type="text" id="city" placeholder="Town / City">
                    </fieldset>
                    <fieldset class="box fieldset">
                        <label for="address">Address</label>
                        <input type="text" id="address" placeholder="Address">
                    </fieldset>
                    <fieldset class="box fieldset">
                        <label for="phone">Phone Number</label>
                        <input type="number" id="phone" placeholder="Phone Number">
                    </fieldset>
                    <fieldset class="box fieldset">
                        <label for="email">Email</label>
                        <input type="email" id="email" placeholder="Email">
                    </fieldset>
                    <fieldset class="box fieldset">
                        <label for="note">Order notes (optional)</label>
                        <textarea name="note" id="note" placeholder="Notes"></textarea>
                    </fieldset>
                </form>
            </div>
            <div class="tf-page-cart-footer">
                <div class="tf-cart-footer-inner">
                    <h5 class="fw-5 mb_20">Your order</h5>
                    <form class="tf-page-cart-checkout widget-wrap-checkout">
                        <ul class="wrap-checkout-product" id="checkoutProductList"></ul>
                        <div class="d-flex justify-content-between line pb_20">
                            <h6 class="fw-5">Total</h6>
                            <h6 class="total fw-5" id="checkoutTotal">$0.00</h6>
                        </div>

                        <div class="wd-check-payment">
                            <div class="fieldset-radio mb_20">
                                <input type="radio" name="payment" id="cc" class="tf-check" disabled>
                                <label for="bank">Credit Card</label>

                            </div>
                            <div class="fieldset-radio mb_20">
                                <input type="radio" name="payment" id="delivery" class="tf-check" checked>
                                <label for="delivery">Cash on delivery</label>
                            </div>
                            <p class="text_black-2 mb_20">Your personal data will be used to process your order,
                                support your experience throughout this website, and for other purposes
                                described in our <a href="javascript:void(0);" class="text-decoration-underline">privacy
                                    policy</a>.</p>
                            <div class="box-checkbox fieldset-radio mb_20">
                                <input type="checkbox" id="check-agree" class="tf-check">
                                <label for="check-agree" class="text_black-2">I have read and agree to the
                                    website <a href="javascript:void(0);" class="text-decoration-underline">terms and
                                        conditions</a>.</label>
                            </div>
                        </div>
                        <a href="thank-you.html"
                            class="tf-btn radius-3 btn-fill btn-icon animate-hover-btn justify-content-center">Place
                            order</a>
                    </form>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- page-cart -->

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const productListContainer = document.getElementById('checkoutProductList');
        const totalContainer = document.getElementById('checkoutTotal');
        const cartItems = JSON.parse(localStorage.getItem('cart')) || [];

        if (cartItems.length === 0) {
            productListContainer.innerHTML = '<li>Your cart is empty</li>';
            totalContainer.textContent = '$0.00';
            return;
        }

        fetch('products.json')
            .then(response => response.json())
            .then(products => {
                let total = 0;
                productListContainer.innerHTML = ''; // clear existing items

                cartItems.forEach(cartItem => {
                    const product = products.find(p => p.id === cartItem.id);
                    if (!product) return;

                    const productImage = product.images?.[0] || 'images/placeholder.jpg';
                    const itemTotal = product.price * cartItem.quantity;
                    total += itemTotal;

                    const li = document.createElement('li');
                    li.className = 'checkout-product-item';
                    li.innerHTML = `
          <figure class="img-product">
            <img src="${productImage}" alt="${product.title}">
            <span class="quantity">${cartItem.quantity}</span>
          </figure>
          <div class="content">
            <div class="info">
              <p class="name">${product.title}</p>
              ${cartItem.color || cartItem.size ? `
              <span class="variant">${cartItem.color || ''} ${cartItem.color && cartItem.size ? '/' : ''} ${cartItem.size || ''}</span>` : ''
                        }
            </div>
            <span class="price">$${itemTotal.toFixed(2)}</span>
          </div>
        `;
                    productListContainer.appendChild(li);
                });

                totalContainer.textContent = `$${total.toFixed(2)}`;
            })
            .catch(error => {
                console.error('Error loading products:', error);
                productListContainer.innerHTML = '<li>Error loading cart details.</li>';
            });
    });
</script>

<script>
    document.addEventListener('DOMContentLoaded', async function () {
        const placeOrderBtn = document.querySelector('.tf-btn.btn-fill');

        placeOrderBtn.addEventListener('click', async function (e) {
            e.preventDefault();

            // Get form values
            const firstName = document.getElementById('first-name').value.trim();
            const lastName = document.getElementById('last-name').value.trim();
            const country = document.getElementById('country').value;
            const city = document.getElementById('city').value.trim();
            const address = document.getElementById('address').value.trim();
            const phone = document.getElementById('phone').value.trim();
            const email = document.getElementById('email').value.trim();
            const termsChecked = document.getElementById('check-agree').checked;

            const errors = [];

            if (!firstName) errors.push("First name is required.");
            if (!lastName) errors.push("Last name is required.");
            if (!country || country === "Select Country") errors.push("Country is required.");
            if (!city) errors.push("City is required.");
            if (!address) errors.push("Address is required.");
            if (!phone) errors.push("Phone number is required.");
            if (!email) {
                errors.push("Email is required.");
            } else if (!validateEmail(email)) {
                errors.push("Enter a valid email address.");
            }
            if (!termsChecked) errors.push("You must agree to the terms and conditions.");

            if (errors.length > 0) {
                alert(errors.join('\n'));
                return;
            }

            const rawCart = JSON.parse(localStorage.getItem('cart')) || [];
            if (!rawCart.length) {
                alert("Your cart is empty.");
                return;
            }

            // Load products.json to enrich cart items
            let productData = [];
            try {
                const res = await fetch('products.json');
                productData = await res.json();
            } catch (err) {
                alert("Failed to load product data.");
                return;
            }

            let totalAmount = 0;
            const enrichedCart = rawCart.map(item => {
                const product = productData.find(p => p.id === item.id);
                if (!product) return null;
                const subtotal = product.price * item.quantity;
                totalAmount += subtotal;

                return {
                    id: item.id,
                    title: product.title,
                    price: product.price,
                    quantity: item.quantity,
                    color: item.color || null,
                    size: item.size || null,
                    image: product.images?.[0] || '',
                    subtotal
                };
            }).filter(Boolean);

            const orderId = 'ORD-' + Date.now();
            const orderDate = new Date().toLocaleString();
            const fullName = `${firstName} ${lastName}`;
            const paymentMethod = 'Cash on Delivery';
            const fullAddress = `${address}, ${city}, ${country}`;

            const orderData = {
                orderId,
                orderDate,
                fullName,
                email,
                phone,
                address: fullAddress,
                paymentMethod,
                products: enrichedCart,
                totalAmount
            };

            sessionStorage.setItem('orderData', JSON.stringify(orderData));
            window.location.href = 'thank-you.html';
        });

        function validateEmail(email) {
            const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return re.test(email.toLowerCase());
        }
    });
</script>



<!-- Footer -->
<footer id="footer" class="footer md-pb-70">
    <div class="footer-wrap">
        <div class="footer-body">
            <div class="container">
                <div class="row">
                    <div class="col-xl-3 col-md-6 col-12">
                        <div class="footer-infor">
                            <div class="footer-logo">
                                <a href="index.html">
                                    <img src="images/logo/logo.png" alt="">
                                </a>
                            </div>
                            <ul>
                                <li>
                                    <p>Address: 350 5th Avenue, 59th Floor,
                                        <br />New York, NY 10118
                                    </p>
                                </li>
                                <li>
                                    <p>Email: <a href="mailto:contact@elantrafashion.com">contact@elantrafashion.com</a>
                                    </p>
                                </li>
                                <li>
                                    <p>Phone: <a href="tel:2127761122">(212) 776-1122</a></p>
                                </li>
                            </ul>
                            <ul class="tf-social-icon d-flex gap-10">
                                <li><a href="javascript:void(0);"
                                        class="box-icon w_34 round social-facebook social-line"><i
                                            class="icon fs-14 icon-fb"></i></a></li>
                                <li><a href="javascript:void(0);"
                                        class="box-icon w_34 round social-twiter social-line"><i
                                            class="icon fs-12 icon-Icon-x"></i></a></li>
                                <li><a href="javascript:void(0);"
                                        class="box-icon w_34 round social-instagram social-line"><i
                                            class="icon fs-14 icon-instagram"></i></a></li>
                                <li><a href="javascript:void(0);"
                                        class="box-icon w_34 round social-tiktok social-line"><i
                                            class="icon fs-14 icon-tiktok"></i></a></li>
                                <li><a href="javascript:void(0);"
                                        class="box-icon w_34 round social-pinterest social-line"><i
                                            class="icon fs-14 icon-pinterest-1"></i></a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="col-xl-3 col-md-6 col-12 footer-col-block">
                        <div class="footer-heading footer-heading-desktop">
                            <h6>Help</h6>
                        </div>
                        <div class="footer-heading footer-heading-moblie">
                            <h6>Help</h6>
                        </div>
                        <ul class="footer-menu-list tf-collapse-content">
                            <li>
                                <a href="javascript:void(0);" class="footer-menu_item">Privacy Policy</a>
                            </li>
                            <li>
                                <a href="javascript:void(0);" class="footer-menu_item"> Return Policy</a>
                            </li>
                            <li>
                                <a href="javascript:void(0);" class="footer-menu_item">Shipping Policy</a>
                            </li>
                            <li>
                                <a href="javascript:void(0);" class="footer-menu_item">Terms &amp;
                                    Conditions</a>
                            </li>
                            <li>
                                <a href="javascript:void(0);" class="footer-menu_item">FAQ’s</a>
                            <li>
                                <a href="wishlist.html" class="footer-menu_item">My Wishlist</a>
                            </li>
                        </ul>
                    </div>
                    <div class="col-xl-3 col-md-6 col-12 footer-col-block">
                        <div class="footer-heading footer-heading-desktop">
                            <h6>About us</h6>
                        </div>
                        <div class="footer-heading footer-heading-moblie">
                            <h6>About us</h6>
                        </div>
                        <ul class="footer-menu-list tf-collapse-content">
                            <li>
                                <a href="about-us.html" class="footer-menu_item">Our Story</a>
                            </li>
                            <li>
                                <a href="contact.html" class="footer-menu_item">Contact Us</a>
                            </li>
                        </ul>
                    </div>
                    <div class="col-xl-3 col-md-6 col-12">
                        <div class="footer-newsletter footer-col-block">
                            <div class="footer-heading footer-heading-desktop">
                                <h6>Sign Up for Email</h6>
                            </div>
                            <div class="footer-heading footer-heading-moblie">
                                <h6>Sign Up for Email</h6>
                            </div>
                            <div class="tf-collapse-content">
                                <div class="footer-menu_item">Subscribe to be the first to know about new arrivals, special offers, exclusive content, events, and more!</div>
                                <form class="form-newsletter subscribe-form">
                                    <div class="subscribe-content">
                                        <fieldset class="email">
                                            <input type="email" name="email-form" class="subscribe-email"
                                                placeholder="Enter your email....">
                                        </fieldset>
                                        <div class="button-submit">
                                            <button
                                                class="subscribe-button tf-btn btn-sm radius-3 btn-fill btn-icon animate-hover-btn"
                                                type="button">Subscribe<i
                                                    class="icon icon-arrow1-top-left"></i></button>
                                        </div>
                                    </div>
                                    <div class="subscribe-msg"></div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <div class="container">
                <div class="row">
                    <div class="col-12">
                        <div
                            class="footer-bottom-wrap d-flex gap-20 flex-wrap justify-content-between align-items-center">
                            <div class="footer-menu_item">&copy;
                                <script>
                                    document.write(new Date().getFullYear());
                                </script> Élantra Store. All Rights Reserved
                            </div>
                            <div class="tf-payment">
                                <img src="images/payments/visa.png" alt="">
                                <img src="images/payments/img-1.png" alt="">
                                <img src="images/payments/img-2.png" alt="">
                                <img src="images/payments/img-3.png" alt="">
                                <img src="images/payments/img-4.png" alt="">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</footer>
<!-- /Footer -->

</div>



<!-- gotop -->
<button id="goTop" class="bounce-forever">
    <span class="icon icon-arrow-up"></span>
</button>
<!-- /gotop -->

<!-- mobile menu -->
<div class="offcanvas offcanvas-start canvas-mb" id="mobileMenu">
    <span class="icon-close icon-close-popup" data-bs-dismiss="offcanvas" aria-label="Close"></span>
    <div class="mb-canvas-content">
        <div class="mb-body">
            <ul class="nav-ul-mb" id="wrapper-menu-navigation">
                <li class="nav-mb-item">
                    <a href="newarrival.html" class="mb-menu-link current">
                        <span>New Arrivals</span>
                    </a>
                </li>
                <li class="nav-mb-item">
                    <a href="bestseller.html" class="mb-menu-link current">
                        <span>Best Sellers</span>
                    </a>
                </li>
                <li class="nav-mb-item">
                    <a href="collection.html" class="mb-menu-link current">
                        <span>Collection</span>
                    </a>
                </li>
                <li class="nav-mb-item">
                    <a href="about-us.html" class="mb-menu-link current">
                        <span>About Us</span>
                    </a>
                </li>
                <li class="nav-mb-item">
                    <a href="contact.html" class="mb-menu-link current">
                        <span>Contact Us</span>
                    </a>
                </li>
            </ul>
            <div class="mb-other-content">
                <div class="d-flex group-icon">
                    <a href="wishlist.html" class="site-nav-icon"><i class="icon icon-heart"></i>Wishlist</a>
                </div>
                <ul class="mb-info">
                    <li>Address: 350 5th Avenue, 59th Floor, New York, NY 10118</li>
                    <li>Email: <b>contact@elantrafashion.com</b></li>
                    <li>Phone: <b>(212) 776-1122</b></li>
                </ul>
            </div>
        </div>
    </div>
</div>
<!-- /mobile menu -->


<!-- shoppingCart -->
<div class="modal fullRight fade modal-shopping-cart" id="shoppingCart">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="header">
                <div class="title fw-5">Shopping cart</div>
                <span class="btn icon-close icon-close-popup" data-bs-dismiss="modal"></span>
            </div>
            <div class="wrap">
                <div class="tf-mini-cart-wrap">
                    <div class="tf-mini-cart-main">
                        <div class="tf-mini-cart-sroll">
                            <div class="tf-mini-cart-items">
                                <div class="tf-mini-cart-item">
                                    <div class="tf-mini-cart-image">
                                        <a href="product-detail.html">
                                            <img src="images/products/sunglasses/s002_2.jpg" alt="">
                                        </a>
                                    </div>
                                    <div class="tf-mini-cart-info">
                                        <a class="title link" href="product-detail.html">T-shirt</a>
                                        <div class="meta-variant">Light gray</div>
                                        <div class="price fw-6">$25.00</div>
                                        <div class="tf-mini-cart-btns">
                                            <div class="wg-quantity small">
                                                <span class="btn-quantity minus-btn">-</span>
                                                <input type="text" name="number" value="1">
                                                <span class="btn-quantity plus-btn">+</span>
                                            </div>
                                            <div class="tf-mini-cart-remove">Remove</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="tf-mini-cart-bottom">
                        <div class="tf-mini-cart-bottom-wrap">
                            <div class="tf-cart-totals-discounts">
                                <div class="tf-cart-total">Subtotal</div>
                                <div class="tf-totals-total-value fw-6">$49.99 USD</div>
                            </div>
                            <div class="tf-cart-tax">Taxes and <a href="javascript:void(0);">shipping</a> calculated at
                                checkout</div>
                            <div class="tf-mini-cart-view-checkout">
                                <a href="cart.html"
                                    class="tf-btn btn-outline radius-3 link w-100 justify-content-center">View
                                    cart</a>
                                <a href="checkout.html"
                                    class="tf-btn btn-fill animate-hover-btn radius-3 w-100 justify-content-center tf-page-cart-item"><span>Check
                                        out</span></a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    document.addEventListener('DOMContentLoaded', () => {
        const cartModal = document.querySelector('#shoppingCart');
        const cartItemsContainer = cartModal.querySelector('.tf-mini-cart-items');
        const subtotalEl = cartModal.querySelector('.tf-totals-total-value');
        let products = [];

        // Load products from JSON
        fetch('products.json')
            .then(res => res.json())
            .then(data => { products = data; });

        // Utility to format price
        const formatPrice = price => `$${price.toFixed(2)}`;

        // Render cart items
        function renderCart() {
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            cart.length === 0 ? document.querySelector(".tf-page-cart-item").classList.add("pe-none") : document.querySelector(".tf-page-cart-item").classList.add("pe-auto;");
            cartItemsContainer.innerHTML = '';
            let subtotal = 0;

            cart.forEach((item, index) => {
                const product = products.find(p => p.id === item.id);
                if (!product) return;

                const totalPrice = product.price * item.quantity;
                subtotal += totalPrice;

                const div = document.createElement('div');
                div.className = 'tf-mini-cart-item';
                div.dataset.index = index;

                div.innerHTML = `
                <div class="tf-mini-cart-image">
                    <a href="product-detail.html?id=${product.id}">
                        <img src="${product.images?.[0] || 'images/no-image.jpg'}" alt="${product.title}">
                    </a>
                </div>
                <div class="tf-mini-cart-info">
                    <a class="title link" href="product-detail.html?id=${product.id}">${product.title}</a>
                    <div class="meta-variant">${item.color || ''} ${item.size ? `- ${item.size}` : ''}</div>
                    <div class="price fw-6">${formatPrice(totalPrice)}</div>
                    <div class="tf-mini-cart-btns">
                        <div class="wg-quantity small">
                            <span class="btn-quantity minus-btn">-</span>
                            <input type="text" value="${item.quantity}" readonly>
                            <span class="btn-quantity plus-btn">+</span>
                        </div>
                        <div class="btn tf-mini-cart-remove">Remove</div>
                    </div>
                </div>
            `;
                cartItemsContainer.appendChild(div);
            });

            subtotalEl.textContent = formatPrice(subtotal);
        }

        // Update localStorage and re-render cart
        function updateCart(cart) {
            localStorage.setItem('cart', JSON.stringify(cart));
            renderCart();
            updateCartCount();
        }

        // Update cart count in header
        function updateCartCount() {
            const countBox = document.querySelector('.nav-cart .nav-icon-item .count-box');
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            const count = cart.reduce((sum, item) => sum + item.quantity, 0);
            if (countBox) countBox.textContent = count;
        }

        // Event listeners for cart modal interactions
        cartItemsContainer.addEventListener('click', (e) => {
            const itemEl = e.target.closest('.tf-mini-cart-item');
            if (!itemEl) return;
            const index = +itemEl.dataset.index;
            let cart = JSON.parse(localStorage.getItem('cart')) || [];

            // Quantity increase
            if (e.target.classList.contains('plus-btn')) {
                cart[index].quantity += 1;
                updateCart(cart);
            }

            // Quantity decrease
            if (e.target.classList.contains('minus-btn')) {
                if (cart[index].quantity > 1) {
                    cart[index].quantity -= 1;
                    updateCart(cart);
                }
            }

            // Remove item
            if (e.target.classList.contains('tf-mini-cart-remove')) {
                cart.splice(index, 1);
                updateCart(cart);
            }
        });

        // Re-render cart every time modal opens
        const shoppingCartModal = document.querySelector('#shoppingCart');
        shoppingCartModal.addEventListener('show.bs.modal', renderCart);

        // Initialize count on load
        updateCartCount();
    });
</script>

<!-- /shoppingCart -->


<!-- modal quick_add -->
<div class="modal fade modalDemo popup-quickadd" id="quick_add">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <!-- <div class="header">
                <span class="icon-close icon-close-popup" data-bs-dismiss="modal"></span>
            </div> -->
            <div class="wrap">
                <div class="tf-product-info-item">
                    <div class="image">
                        <img src="images/products/sunglasses/s002_2.jpg" alt="">
                    </div>
                    <div class="content">
                        <a href="product-detail.html">Ribbed Tank Top</a>
                        <div class="tf-product-info-price">
                            <!-- <div class="price-on-sale">$8.00</div>
                                <div class="compare-at-price">$10.00</div>
                                <div class="badges-on-sale"><span>20</span>% OFF</div> -->
                            <div class="price">$18.00</div>
                        </div>
                    </div>
                </div>
                <div class="tf-product-info-variant-picker mb_15">
                    <div class="variant-picker-item colorPicker">
                        <div class="variant-picker-label">
                            Color: <span class="fw-6 variant-picker-label-value">Orange</span>
                        </div>
                        <div class="variant-picker-values">
                            <input id="values-orange" type="radio" name="color" checked>
                            <label class="hover-tooltip radius-60" for="values-orange" data-value="Orange">
                                <span class="btn-checkbox bg-color-orange"></span>
                                <span class="tooltip">Orange</span>
                            </label>
                            <input id="values-black" type="radio" name="color">
                            <label class=" hover-tooltip radius-60" for="values-black" data-value="Black">
                                <span class="btn-checkbox bg-color-black"></span>
                                <span class="tooltip">Black</span>
                            </label>
                            <input id="values-white" type="radio" name="color">
                            <label class="hover-tooltip radius-60" for="values-white" data-value="White">
                                <span class="btn-checkbox bg-color-white"></span>
                                <span class="tooltip">White</span>
                            </label>
                        </div>
                    </div>
                    <div class="variant-picker-item sizePicker">
                        <div class="variant-picker-label">
                            Size: <span class="fw-6 variant-picker-label-value">S</span>
                        </div>
                        <div class="variant-picker-values">
                            <input type="radio" name="size" id="values-s" checked>
                            <label class="style-text" for="values-s" data-value="S">
                                <p>S</p>
                            </label>
                            <input type="radio" name="size" id="values-m">
                            <label class="style-text" for="values-m" data-value="M">
                                <p>M</p>
                            </label>
                            <input type="radio" name="size" id="values-l">
                            <label class="style-text" for="values-l" data-value="L">
                                <p>L</p>
                            </label>
                            <input type="radio" name="size" id="values-xl">
                            <label class="style-text" for="values-xl" data-value="XL">
                                <p>XL</p>
                            </label>
                        </div>
                    </div>
                </div>
                <div class="tf-product-info-quantity mb_15">
                    <div class="quantity-title fw-6">Quantity</div>
                    <div class="wg-quantity">
                        <span class="btn-quantity minus-btn">-</span>
                        <input type="text" name="number" value="1">
                        <span class="btn-quantity plus-btn">+</span>
                    </div>
                </div>
                <div class="tf-product-info-buy-button">
                    <form>
                        <a
                            class="tf-btn btn-fill justify-content-center fw-6 fs-16 flex-grow-1 animate-hover-btn btn-add-to-cart"><span>Add
                                to cart</a>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    document.addEventListener('DOMContentLoaded', () => {
        let products = [];

        // Fetch product data from JSON
        fetch('products.json')
            .then(res => res.json())
            .then(data => { products = data; });

        // Quick Add modal handler
        document.addEventListener('click', (e) => {
            const btn = e.target.closest('.quick-add');
            if (!btn) return;

            const productId = btn.dataset.productId;
            const product = products.find(p => p.id === productId);
            if (!product) return;

            const modal = document.querySelector('#quick_add');
            const addToCartBtn = modal.querySelector('.btn-add-to-cart');

            // Set base data attributes
            addToCartBtn.setAttribute('data-product-id', product.id);
            addToCartBtn.setAttribute('data-quantity', '1'); // default quantity

            // Image, title, link, price
            modal.querySelector('.tf-product-info-item .image img').src = product.images?.[0] || '';
            modal.querySelector('.tf-product-info-item .content a').textContent = product.title;
            modal.querySelector('.tf-product-info-item .content a').href = `product-detail.html?id=${product.id}`;
            modal.querySelector('.tf-product-info-price .price').textContent = `$${product.price.toFixed(2)}`;
            addToCartBtn.innerHTML = `<span>Add to cart</span>`;

            // === COLOR ===
            const colorSection = modal.querySelector('.colorPicker');
            const colorWrapper = colorSection?.querySelector('.variant-picker-values');
            const colorLabelValue = colorSection?.querySelector('.variant-picker-label-value');
            if (Array.isArray(product.color) && product.color.length > 0) {
                colorSection.style.display = 'block';
                colorWrapper.innerHTML = product.color.map((color, i) => `
                    <input id="values-${color.toLowerCase()}" type="radio" name="color" ${i === 0 ? 'checked' : ''}>
                    <label class="hover-tooltip radius-60" for="values-${color.toLowerCase()}" data-value="${color}">
                        <span class="btn-checkbox" style="background:${color.toLowerCase()}"></span>
                        <span class="tooltip">${color}</span>
                    </label>
                `).join('');
                addToCartBtn.setAttribute('data-color', product.color[0]);
                if (colorLabelValue) colorLabelValue.textContent = product.color[0];
            } else {
                colorSection.style.display = 'none';
                addToCartBtn.removeAttribute('data-color');
            }

            // === SIZE ===
            const sizeSection = modal.querySelector('.sizePicker');
            const sizeWrapper = sizeSection?.querySelector('.variant-picker-values');
            const sizeLabelValue = sizeSection?.querySelector('.variant-picker-label-value');
            if (Array.isArray(product.size) && product.size.length > 0) {
                sizeSection.style.display = 'block';
                sizeWrapper.innerHTML = product.size.map((size, i) => `
                    <input type="radio" name="size" id="values-${size}" ${i === 0 ? 'checked' : ''}>
                    <label class="style-text" for="values-${size}" data-value="${size}">
                        <p>${size}</p>
                    </label>
                `).join('');
                addToCartBtn.setAttribute('data-size', product.size[0]);
                if (sizeLabelValue) sizeLabelValue.textContent = product.size[0];
            } else {
                sizeSection.style.display = 'none';
                addToCartBtn.removeAttribute('data-size');
            }

            // Reset quantity input to 1
            const quantityInput = modal.querySelector('.wg-quantity input[name="number"]');
            if (quantityInput) {
                quantityInput.value = '1';
                addToCartBtn.setAttribute('data-quantity', '1');
            }

            // Show modal
            new bootstrap.Modal(modal).show();
        });

        // Handle color/size/quantity changes
        document.addEventListener('change', (e) => {
            const modal = document.querySelector('#quick_add');
            const addToCartBtn = modal.querySelector('.btn-add-to-cart');
            if (!addToCartBtn) return;

            // Color
            if (e.target.name === 'color') {
                const selectedLabel = modal.querySelector('input[name="color"]:checked + label');
                const selectedColor = selectedLabel?.dataset.value;
                if (selectedColor) {
                    addToCartBtn.setAttribute('data-color', selectedColor);
                    const colorLabelValue = modal.querySelector('.colorPicker .variant-picker-label-value');
                    if (colorLabelValue) colorLabelValue.textContent = selectedColor;
                }
            }

            // Size
            if (e.target.name === 'size') {
                const selectedLabel = modal.querySelector('input[name="size"]:checked + label');
                const selectedSize = selectedLabel?.dataset.value;
                if (selectedSize) {
                    addToCartBtn.setAttribute('data-size', selectedSize);
                    const sizeLabelValue = modal.querySelector('.sizePicker .variant-picker-label-value');
                    if (sizeLabelValue) sizeLabelValue.textContent = selectedSize;
                }
            }

            // Manual quantity input
            if (e.target.name === 'number') {
                const qty = parseInt(e.target.value);
                if (!isNaN(qty) && qty > 0) {
                    addToCartBtn.setAttribute('data-quantity', qty);
                }
            }
        });

        // Handle plus/minus buttons for quantity
        document.addEventListener('click', (e) => {
            const btn = e.target.closest('.btn-quantity');
            if (!btn) return;

            const modal = document.querySelector('#quick_add');
            const quantityInput = modal.querySelector('.wg-quantity input[name="number"]');
            const addToCartBtn = modal.querySelector('.btn-add-to-cart');
            if (!quantityInput || !addToCartBtn) return;

            let qty = parseInt(quantityInput.value) || 1;

            if (btn.classList.contains('plus-btn')) {
                qty += 1;
            } else if (btn.classList.contains('minus-btn')) {
                qty = Math.max(1, qty - 1);
            }

            quantityInput.value = qty;
            addToCartBtn.setAttribute('data-quantity', qty);
        });
    });
</script>

<!--<script>
    document.addEventListener('DOMContentLoaded', () => {
        let products = [];

        // Fetch product data from JSON
        fetch('products.json')
            .then(res => res.json())
            .then(data => { products = data; });

        // Quick Add modal handler
        document.addEventListener('click', (e) => {
            const btn = e.target.closest('.quick-add');
            if (!btn) return;

            const productId = btn.dataset.productId;
            const product = products.find(p => p.id === productId);
            if (!product) return;

            const modal = document.querySelector('#quick_add');
            const addToCartBtn = modal.querySelector('.btn-add-to-cart');

            // Set base data attributes
            addToCartBtn.setAttribute('data-product-id', product.id);
            addToCartBtn.setAttribute('data-quantity', '1'); // default quantity

            // Image, title, link, price
            modal.querySelector('.tf-product-info-item .image img').src = product.images?.[0] || '';
            modal.querySelector('.tf-product-info-item .content a').textContent = product.title;
            modal.querySelector('.tf-product-info-item .content a').href = `product-detail.html?id=${product.id}`;
            modal.querySelector('.tf-product-info-price .price').textContent = `$${product.price.toFixed(2)}`;
            addToCartBtn.innerHTML = `<span>Add to cart</span>`;

            // === COLOR ===
            const colorSection = modal.querySelector('.colorPicker');
            const colorWrapper = colorSection?.querySelector('.variant-picker-values');
            if (Array.isArray(product.color) && product.color.length > 0) {
                colorSection.style.display = 'block';
                colorWrapper.innerHTML = product.color.map((color, i) => `
                    <input id="values-${color.toLowerCase()}" type="radio" name="color" ${i === 0 ? 'checked' : ''}>
                    <label class="hover-tooltip radius-60" for="values-${color.toLowerCase()}" data-value="${color}">
                        <span class="btn-checkbox" style="background:${color.toLowerCase()}"></span>
                        <span class="tooltip">${color}</span>
                    </label>
                `).join('');
                addToCartBtn.setAttribute('data-color', product.color[0]);
            } else {
                colorSection.style.display = 'none';
                addToCartBtn.removeAttribute('data-color');
            }

            // === SIZE ===
            const sizeSection = modal.querySelector('.sizePicker');
            const sizeWrapper = sizeSection?.querySelector('.variant-picker-values');
            if (Array.isArray(product.size) && product.size.length > 0) {
                sizeSection.style.display = 'block';
                sizeWrapper.innerHTML = product.size.map((size, i) => `
                    <input type="radio" name="size" id="values-${size}" ${i === 0 ? 'checked' : ''}>
                    <label class="style-text" for="values-${size}" data-value="${size}">
                        <p>${size}</p>
                    </label>
                `).join('');
                addToCartBtn.setAttribute('data-size', product.size[0]);
            } else {
                sizeSection.style.display = 'none';
                addToCartBtn.removeAttribute('data-size');
            }

            // Reset quantity input to 1
            const quantityInput = modal.querySelector('.wg-quantity input[name="number"]');
            if (quantityInput) {
                quantityInput.value = '1';
                addToCartBtn.setAttribute('data-quantity', '1');
            }

            // Show modal
            new bootstrap.Modal(modal).show();
        });

        // Handle color/size/quantity changes
        document.addEventListener('change', (e) => {
            const modal = document.querySelector('#quick_add');
            const addToCartBtn = modal.querySelector('.btn-add-to-cart');
            if (!addToCartBtn) return;

            // Color
            if (e.target.name === 'color') {
                const selectedLabel = modal.querySelector('input[name="color"]:checked + label');
                const selectedColor = selectedLabel?.dataset.value;
                if (selectedColor) {
                    addToCartBtn.setAttribute('data-color', selectedColor);
                }
            }

            // Size
            if (e.target.name === 'size') {
                const selectedLabel = modal.querySelector('input[name="size"]:checked + label');
                const selectedSize = selectedLabel?.dataset.value;
                if (selectedSize) {
                    addToCartBtn.setAttribute('data-size', selectedSize);
                }
            }

            // Manual input in quantity
            if (e.target.name === 'number') {
                const qty = parseInt(e.target.value);
                if (!isNaN(qty) && qty > 0) {
                    addToCartBtn.setAttribute('data-quantity', qty);
                }
            }
        });

        // Handle plus/minus buttons in quantity
        document.addEventListener('click', (e) => {
            const btn = e.target.closest('.btn-quantity');
            if (!btn) return;

            const modal = document.querySelector('#quick_add');
            const quantityInput = modal.querySelector('.wg-quantity input[name="number"]');
            const addToCartBtn = modal.querySelector('.btn-add-to-cart');
            if (!quantityInput || !addToCartBtn) return;

            let qty = parseInt(quantityInput.value) || 1;

            if (btn.classList.contains('plus-btn')) {
                qty += 1;
            } else if (btn.classList.contains('minus-btn')) {
                qty = Math.max(1, qty - 1);
            }

            quantityInput.value = qty;
            addToCartBtn.setAttribute('data-quantity', qty);
        });
    });
</script>-->
<!-- /modal quick_add -->


<!-- wishlist count -->
<script>
    function updateWishlistCount() {
        const wishlist = JSON.parse(localStorage.getItem('wishlist')) || [];
        const countBox = document.querySelector('.nav-icon-item .count-box');
        if (countBox) {
            countBox.textContent = wishlist.length;
        }
    }

</script>
<!-- wishlist count -->

<!-- add to wishlist -->
<script>
    document.addEventListener('DOMContentLoaded', function () {
        let wishlist = JSON.parse(localStorage.getItem('wishlist')) || [];

        function updateWishlistCount() {
            const countBox = document.querySelector('.nav-icon-item .count-box');
            if (countBox) {
                countBox.textContent = wishlist.length;
            }
        }

        // Delegate click listener for dynamic content
        document.addEventListener('click', function (e) {
            const btn = e.target.closest('.wishlist-btn');
            if (!btn) return;

            const productId = btn.dataset.productId;
            if (!productId) return;

            const index = wishlist.indexOf(productId);
            if (index > -1) {
                wishlist.splice(index, 1);
                btn.classList.remove('active');
            } else {
                wishlist.push(productId);
                btn.classList.add('active');
            }

            localStorage.setItem('wishlist', JSON.stringify(wishlist));
            updateWishlistCount(); // ✅ Update count on each change
        });

        // Set button active states on page load
        document.querySelectorAll('.wishlist-btn').forEach(btn => {
            const productId = btn.dataset.productId;
            if (wishlist.includes(productId)) {
                btn.classList.add('active');
            }
        });

        updateWishlistCount(); // ✅ Initial count setup
    });

</script>
<!-- /add to wishlist -->

<!-- add to cart -->
<script>
    document.addEventListener('DOMContentLoaded', function () {
        // Retrieve or initialize cart array from localStorage
        let cart = JSON.parse(localStorage.getItem('cart')) || [];

        // Update the cart count badge in the header
        function updateCartCount() {
            const countBox = document.querySelector('.nav-cart .nav-icon-item .count-box');
            if (countBox) {
                countBox.textContent = cart.reduce((sum, item) => sum + item.quantity, 0);
            }
        }

        // Handle add-to-cart clicks
        document.addEventListener('click', function (e) {
            const btn = e.target.closest('.btn-add-to-cart');
            if (!btn) return;

            const productId = btn.getAttribute('data-product-id');
            const color = btn.getAttribute('data-color');
            const size = btn.getAttribute('data-size');
            const quantity = parseInt(btn.getAttribute('data-quantity')) || 1;

            if (!productId) return;

            // Check if the exact same product (same ID, color, size) is already in cart
            const existingItem = cart.find(item =>
                item.id === productId &&
                item.color === color &&
                item.size === size
            );

            if (existingItem) {
                // Update quantity
                existingItem.quantity += quantity;
            } else {
                // Add new item
                cart.push({
                    id: productId,
                    color: color,
                    size: size,
                    quantity: quantity
                });
            }

            // Save updated cart and update count
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartCount();

            // Open the cart modal
            const cartModalEl = document.getElementById('shoppingCart');
            if (cartModalEl) {
                const cartModal = new bootstrap.Modal(cartModalEl);
                cartModal.show();
            }
        });

        // Initialize cart count on page load
        updateCartCount();
    });
</script>
<!-- add to cart -->


<!-- Javascript -->
<script src="js/bootstrap.min.js"></script>
<script src="js/jquery.min.js"></script>
<script src="js/swiper-bundle.min.js"></script>
<script src="js/carousel.js"></script>
<script src="js/bootstrap-select.min.js"></script>
<script src="js/lazysize.min.js"></script>
<script src="js/wow.min.js"></script>
<script src="js/multiple-modal.js"></script>
<script src="js/main.js"></script>
</body>

</html>
